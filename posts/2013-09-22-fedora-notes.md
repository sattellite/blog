---
tags: linux, fedora
noedit: true
---

# Заметки в помощь с Fedora

Полезные (для меня) заметки по Fedora Linux, чтобы не забылось и не потерялось. Временами будет пополняться.

###Автозапуск скриптов при старте системы
Необходимо создать файл `/etc/rc.d/rc.local` со следующим содержимым:

    #!/bin/bash
    ...
    exit 0

Где троеточие заменять вызовами нужных скриптов. Сделать `/etc/rc.d/rc.local` исполняемым:

    chmod +x /etc/rc.d/rc.local

И добавить в запуск сервис:

    systemctl enable rc-local


Например, для запуска `daemontools` надо добавить строку:

    /sbin/svscanboot &

###Перенос системы с одного жесткого диска на другой

При возникновении ситуации, когда необходимо перенести данные с одного жетского диска на другой (например, большего размера или в случае, как у меня, когда началась сильная деградация и увеличивается количество bad-блоков) можно воспользоваться `rsync` и `chroot`.

Для начала, с помощью `rsync`, скопировать необходимые разделы на другой жесткий диск:

    # rsync -avPX --numeric-ids --ignore-errors --exclude='/proc' --exclude='/sys' --exclude='/dev' / /mnt/

Данные будут копироваться с учетом расширенных атрибутов - ключ `X`. После того, как копирование завершится надо подключиться с помощью `chroot` к "новой" системе и установить ***grub*** на новый раздел:

    # mount -o bind /dev /mnt/dev
    # mount -o bind /proc /mnt/proc
    # mount -o bind /sys /mnt/sys
    # mount -t tmpfs /mnt/tmpfs /mnt/tmp
    # chroot /mnt
    # grub2-install [--force] /dev/sdX
    # grub2-mkconfig -o /boot/grub2/grub.cfg

После можно перезагружаться, отключать старый жесткий диск и загружаться с нового.
